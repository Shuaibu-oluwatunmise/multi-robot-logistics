<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multi-Robot Logistics System</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="header">
        <h1>ü§ñ Multi-Robot Logistics System</h1>
        <div class="connection-status" id="connection-status">
            <div class="status-indicator">
                <div class="status-dot"></div>
                <span>No robots added</span>
            </div>
        </div>
    </div>

    <div class="main-container">
        <!-- Map section will be replaced by MapViewer component -->
        <div class="map-section">
            <h2 style="margin-bottom: 1rem;">üó∫Ô∏è Live Map View</h2>
            <div class="map-canvas" id="map-canvas">
                <div class="map-placeholder">
                    Loading map viewer...<br>
                    <small>Initializing components...</small>
                </div>
            </div>
        </div>

        <div class="control-section">
            <!-- Robot cards will be dynamically added here -->
            
            <div class="ride-controls">
                <h3>üöó Request Ride</h3>
                <div class="location-input">
                    <label>Pickup Location:</label>
                    <div class="location-display" id="pickup-display">Click on map to set pickup</div>
                </div>
                <div class="location-input">
                    <label>Destination:</label>
                    <div class="location-display" id="destination-display">Click on map to set destination</div>
                </div>
                <button class="btn" id="request-ride-btn" disabled>Set Pickup Location</button>
                
                <!-- System Controls -->
                <div style="margin-top: 1rem; display: flex; gap: 0.5rem;">
                    <button class="btn" id="add-robot-btn" style="background: rgba(81, 207, 102, 0.6); flex: 1;" 
                            onclick="if(window.robotManager) window.robotManager.showAddRobotDialog(); else console.log('Robot manager not ready');">
                        ‚ûï Add Robot
                    </button>
                    <button class="btn" onclick="if(window.app) window.app.startMapping(); else console.log('App not ready');" 
                            style="background: rgba(51, 154, 240, 0.6); flex: 1;">
                        üó∫Ô∏è Start Mapping
                    </button>
                </div>
            </div>

            <div class="log-section">
                <div id="log-container"></div>
            </div>
        </div>
    </div>

    <!-- Include ROSLIB -->
    <script src="https://cdn.jsdelivr.net/npm/roslib@1.3.0/build/roslib.min.js"></script>
    
    <!-- Include our modular components -->
    <script src="js/services/ros-connector.js"></script>
    <script src="js/components/robot-card.js"></script>
    <script src="js/components/control-pad.js"></script>
    <script src="js/components/map-viewer.js"></script>
    <script src="js/components/robot-manager.js"></script>
    <script src="js/main.js"></script>
</body>
</html>
